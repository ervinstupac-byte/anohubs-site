<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hydro-Vision Gallery | Global Eco-Integrity</title>
    <meta name="description" content="A curated collection of global landscapes, rivers, and hydropower environments showcasing the natural capital protected by the AnoHUB Integrity Standard.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // === Tailwind Konfiguracija ===
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hydro-primary': '#22d3ee', 
                        'hydro-secondary': '#4ade80', 
                        'hydro-charcoal': '#111827', 
                        'hydro-slate': '#1E293B',
                        'hydro-cta': '#f59e0b', 
                    },
                },
            }
        };

        // ====================================================================
        // KLIJENTSKA LOGIKA ZA GALERIJU - UMETNUTA LISTA FAJLOVA
        // ====================================================================
        
        const imageFilenames = [
            // KRITIČNO: Umetnuta puna lista slika
            '20190618_213435.jpg', 'IMG20170304090522.jpg', '20190620_233856.jpg', '20221201_025542.jpg', 
            '20210511_071530.jpg', '2606d612-866d-49a6-b259-a2e520d776c3.jpg', 
            '4 (1).PNG', '6.PNG', '20180628_144319.jpg', '20180702_084645.jpg', '20180711_113934.jpg', 
            '20180711_114028.jpg', '20180713_175456.jpg', '20180724_094021.jpg', '20180809_165247.jpg', 
            '20181220_204329.jpg', '20190305_171017.jpg', '20190305_175501.jpg', '20190315_181916.jpg', 
            '20190327_115716.jpg', '20190411_102314.jpg', '20190613_191351.jpg', '20190618_134345.jpg', 
            '20190618_213435 (1).jpg', '20190618_213435.jpg', '20190619_175133.jpg', '20190620_233856 (1).jpg', 
            '20190620_233856.jpg', '20190620_215516.jpg', '20201420_215541.jpg', '20210422_190129.jpg', 
            '20210422_201757.jpg', '20210425_171800.jpg', '20210425_220049.jpg', '20210511_071530 (1).jpg', 
            '20210515_205921.jpg', '20210626_181939.jpg', '20210713_075717.jpg', '20210715_100746.jpg', 
            '20210719_073859.jpg', '20210805_174424.jpg', '20210805_174627.jpg', '20210806_111136.jpg', 
            '20210907_125844.jpg', '20210907_125914.jpg', '20210909_105425.jpg', '20211023_133034.jpg', 
            '20211124_105640.jpg', '20211206_114953.jpg', '20220117_130611.jpg', '20220120_131200.jpg', 
            '20220121_171227.jpg', '20220123_101030.jpg', '20220123_153518 (1).jpg', '20220124_182254.jpg', 
            '20220410_130254.jpg', '20220424_161843.jpg', '20220501_162103.jpg', '20220509_162924.jpg', 
            '20220510_123149.jpg', '20220518_220601.jpg', '20220518_222151.jpg', '20220521_181126.jpg', 
            '20220526_171253.jpg', '20220528_143651.jpg', '20220529_202032.jpg', '20220529_202123.jpg', 
            '20220529_203726.jpg', '20220529_205724.jpg', '20220529_210235.jpg', '20220529_210758.jpg', 
            '20220529_211047.jpg', '20220602_194023.jpg', '20220602_194027.jpg', '20220602_194036.jpg', 
            '20220611_173842.jpg', '20220611_175008.jpg', '20220616_180042.jpg', '20220621_231605.jpg', 
            '20220622_133309.jpg', '20220710_201300.jpg', '20220710_201331.jpg', '20220711_071324.jpg', 
            '20220712_193452.jpg', '20220714_172548.jpg', '20220715_074823.jpg', '20220715_114324.jpg', 
            '20220725_125821.jpg', '20220725_130101.jpg', '20220805_162343.jpg', '20220808_203235.jpg', 
            '20220809_155503.jpg', '20220809_163942.jpg', '20220818_150119.jpg', '20220823_085408.jpg', 
            '20220824_083229.jpg', '20220831_111213.jpg', '20221005_141144.jpg', '20221005_141219.jpg', 
            '20221121_141104.jpg', '20221130_164230.jpg', '20221130_164233.jpg', '20221201_025542.jpg', 
            '20221202_181637.jpg', '20221202_181658.jpg', '20221202_181909 (1).jpg', '20221202_181909.jpg', 
            '20221203_103703.jpg', '20221203_140751.jpg', '20221204_081839.jpg', '20221205_065322.jpg', 
            '20221205_094716.jpg', '20221205_114309.jpg', '20221206_150124.jpg', '20221206_151103.jpg', 
            '20221207_154311.jpg', '20221207_171556.jpg', '20221207_171818.jpg', '20221207_171944.jpg', 
            '20221207_172006.jpg', '20221209_132357.jpg', '20221209_194030.jpg', '20221210_224633.jpg', 
            '20221211_185209.jpg', '20221212_172445.jpg', '20221213_163209.jpg', '20221215_084124.jpg', 
            '20221215_192619.jpg', '20221223_132348.jpg', '20230115_111358.jpg', '20230116_105039.jpg', 
            '20230316_175212.jpg', '20230331_143004.jpg', '20230403_081704.jpg', '20230616_100223.jpg', 
            '20230621_051542.jpg', '20230626_143133.jpg', '20230704_150707.jpg', '20230704_151912.jpg', 
            '20230704_174716.jpg', '20230721_113008.jpg', '20230721_113038.jpg', '20230721_113303.jpg', 
            '20230721_152842.jpg', '20230828_191056.jpg', '20230922_111734.jpg', '20230922_112538.jpg', 
            '20230922_153614.jpg', '20230922_153715.jpg', '20231001_171728.jpg', '20231106_070539.jpg', 
            '20231116_155834.jpg', '20231209_120007.jpg', '20231210_132933.jpg', '20231210_133025.jpg', 
            '20231212_083417.jpg', '20231212_083606.jpg', '20231227_163502.jpg', '20240613_095904.jpg', 
            '20240719_200150.jpg', '20250901_124118.jpg', '20250901_124501.jpg', '20250901_124735.jpg', 
            '20250901_125125.jpg', '20250901_163256.jpg', '20250901_163357.jpg', 'dji_fly_20211227_110234_35_1661929513050_photo_optimized.jpg', 
            'dji_fly_20220122_052858_71_1661929513087_photo_optimized.jpg', 'dji_fly_20220122_053532_76_1661929513078_photo_optimized.jpg', 
            'dji_fly_20220125_122626_93_1661929513062_photo_optimized.jpg', 'dji_fly_20220125_135208_0_1661929513113_photo.jpg', 
            'dji_fly_20230723_104412_171_1677120538107_photo_optimized.jpg', 'dji_fly_20230531_115606_231_1685508979619_photo_optimized.jpg', 
            'dji_fly_20230608_093304_293_1686191623005_photo_optimized.jpg', 'dji_fly_20230630_105622_454_1688093955943_photo_optimized.jpg', 
            'dji_fly_20230703_174842_482_1688377737493_photo_optimized.jpg', 'IMG_20190623_123140.jpg', 'IMG_20190625_193834.jpg', 
            'IMG_20190626_140300.jpg', 'IMG_20190707_104324.jpg', 'IMG_20190727_161220.jpg', 'IMG_20190731_162025.jpg', 
            'IMG_20190731_164301.jpg', 'IMG_20190808_190454.jpg', 'IMG_20190820_181148.jpg', 'IMG_20190902_144732.jpg', 
            'IMG_20190908_174848.jpg', 'IMG_20190910_174831.jpg', 'IMG_20190918_163940.jpg', 'IMG_20190928_184857.jpg', 
            'IMG_20190930_073721.jpg', 'IMG_20191005_140741.jpg', 'IMG_201901005_140750.jpg', 'IMG_20191008_180606.jpg', 
            'IMG_20191012_124134.jpg', 'IMG_20191012_195541.jpg', 'IMG_20191018_094059.jpg', 'IMG_20191106_155401.jpg', 
            'IMG_20191119_161129.jpg', 'IMG_20191127_094218.jpg', 'IMG_20200122_160528_1_BURST002.jpg', 'IMG_20200122_160534.jpg', 
            'IMG_20200122_160738.jpg', 'IMG_20200122_160743.jpg', 'IMG_20200122_162955.jpg', 'IMG_20200122_165855.jpg', 
            'IMG_20200202_103501.jpg', 'IMG_20200205_150434.jpg', 'IMG_20200214_093709.jpg', 'IMG_20200215_095309.jpg', 
            'IMG_20200306_142821.jpg', 'IMG_20200307_092415.jpg', 'IMG_20200509_162202.jpg', 'IMG_20200518_104444.jpg', 
            'IMG_20200523_163930_BURST001_COVER.jpg', 'IMG_20200523_164050.jpg', 'IMG_20200524_154634_PANO.jpg', 'IMG_20200524_154801.jpg', 
            'IMG_20200526_184043.jpg', 'IMG_20200606_163721.jpg', 'IMG_20200620_172530.jpg', 'IMG_20200620_181148.jpg', 
            'IMG_20200716_133530.jpg', 'IMG_20200720_175506.jpg', 'IMG_20200720_175510.jpg', 'IMG_20200814_101140.jpg', 
            'IMG_20200819_151743.jpg', 'IMG_20200830_110917.jpg', 'IMG_20200830_122414.jpg', 'IMG_20200830_123017.jpg', 
            'IMG_20200830_153528.jpg', 'IMG_20201106_183442.jpg', 'IMG_20201110_090446.jpg', 'IMG_20201110_090451.jpg', 
            'IMG_20201124_145540.jpg', 'IMG_20201207_103611.jpg', 'IMG_20210524_110135.jpg', 'IMG_20210617_154844.jpg', 
            'IMG_20210721_112608.jpg', 'IMG_20210722_102425.jpg', 'IMG_20211119_155917.jpg', 'IMG_20211122_133648.jpg', 
            'IMG_20220122_095139.jpg', 'IMG_20220122_142027.jpg', 'IMG_20220123-WA0004.jpg', 'IMG_20220527-WA0004 (1).jpg', 
            'IMG_20240216-WA0005.jpg', 'IMG_20240216-WA0015.jpg', 'IMG_20240721-WA0057.jpg', 'IMG_20240721-WA0058.jpg', 
            'IMG20170210151215.jpg', 'IMG20170224075916.jpg', 'IMG20170227070811.jpg', 'IMG20170227095223.jpg', 
            'IMG20170227175108.jpg', 'IMG20170304090522.jpg', 'IMG20170308073015.jpg', 'IMG20170321105402.jpg', 
            'IMG20170531150523.jpg', 'IMG20170601160227.jpg', 'IMG20170601162321.jpg', 'IMG20170602092948.jpg', 
            'IMG20170715152510.jpg', 'IMG20170721144437.jpg', 'IMG20170725091617.jpg', 'IMG20170728125127.jpg', 
            'IMG20170809091938.jpg', 'IMG20170823182319.jpg', 'IMG20170901081829.jpg', 'IMG201711111085129.jpg', 
            'IMG20171114152057.jpg', 'IMG20171129202927.jpg', 'IMG20171130104752.jpg', 'IMG2018021112741.jpg', 
            'IMG20180219164534.jpg', 'IMG20180220082613.jpg', 'IMG20180220191613.jpg', 'IMG20180223104205.jpg', 
            'IMG20180223144045.jpg', 'about_us_bckgrnd.jpg'
        ];


        // Priprema galerije (Dodaje putanju i automatski generiše opis)
        const galleryImages = imageFilenames.map(filename => ({
            src: 'slike/gallery/' + filename, 
            caption: filename.replace(/_/g, ' ').replace(/\.[^/.]+$/, '').toUpperCase() 
        }));
        
        let currentIndex = 0;

        function openModal(index) {
            currentIndex = index;
            const modal = document.getElementById('lightbox-modal');
            const slideshowBtn = document.getElementById('slideshow-btn');
            
            // Zaustavi slideshow ako je već aktivan
            if (slideshowBtn && slideshowBtn.textContent.includes('Stop')) {
                toggleSlideshow(slideshowBtn);
            }
            
            updateImage(false); 
            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        // F-ja za navigaciju i ažuriranje slike
        function updateImage(useTransition = true) {
            const container = document.getElementById('lightbox-image-wrapper');
            const total = galleryImages.length;
            const img = galleryImages[currentIndex];
            
            const animationClass = useTransition ? 'animate-fade-in' : '';
            
            // Slika je unutar fiksnog wrappera
            container.innerHTML = `
                <img src="${img.src}" alt="${img.caption}" class="max-w-full max-h-full object-contain ${animationClass}" style="animation-duration: 0.3s;">
            `;
            
            // Ažuriranje opisa
            document.getElementById('lightbox-caption').textContent = img.caption;
            document.getElementById('lightbox-counter').textContent = `Image ${currentIndex + 1} of ${total}`;
            
            // Onemogućavanje dugmadi
            document.getElementById('prev-btn').disabled = (currentIndex === 0);
            document.getElementById('next-btn').disabled = (currentIndex === total - 1);
        }

        // F-ja za navigaciju (izložena globalno)
        window.navigateGallery = (direction) => {
            const total = galleryImages.length;
            const newIndex = currentIndex + direction;

            if (newIndex >= 0 && newIndex < total) {
                currentIndex = newIndex;
                updateImage(true); 
            }
        };

        // F-ja za pokretanje/zaustavljanje slideshowa (SA LOOPOM)
        let slideshowInterval;
        window.toggleSlideshow = (button) => {
            const total = galleryImages.length;
            if (slideshowInterval) {
                // ZAUSTAVLJANJE
                clearInterval(slideshowInterval);
                slideshowInterval = null;
                button.innerHTML = '▶️ Start Slideshow';
                button.classList.remove('bg-red-600');
                button.classList.add('bg-hydro-secondary');
            } else {
                // POKRETANJE
                // Ako je kraj, vrati se na početak (LOOP)
                if (currentIndex === total - 1) {
                    currentIndex = 0;
                    updateImage(false);
                }

                button.innerHTML = '⏸️ Stop Slideshow';
                button.classList.remove('bg-hydro-secondary');
                button.classList.add('bg-red-600');
                
                slideshowInterval = setInterval(() => {
                    if (currentIndex < total - 1) {
                        navigateGallery(1);
                    } else {
                        // Vraća se na početak za kontinuirani loop
                        currentIndex = 0;
                        updateImage(true); 
                    }
                }, 3500); // 3.5 sekundi
            }
        };

        function closeModal() {
            const modal = document.getElementById('lightbox-modal');
            modal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            
            const slideshowBtn = document.getElementById('slideshow-btn');
            if (slideshowBtn && slideshowBtn.textContent.includes('Stop')) {
                 toggleSlideshow(slideshowBtn);
            }
        }
        
        // Inicijalizacija grid-a i ikona
        document.addEventListener("DOMContentLoaded", function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Generisanje svih thumbnailova
            const grid = document.querySelector('.gallery-grid');
            if (grid) {
                galleryImages.forEach((img, index) => {
                    grid.innerHTML += `
                        <div onclick="openModal(${index})" class="thumbnail-item">
                            <img src="${img.src}" alt="${img.caption}" class="thumbnail-img w-full h-36 object-cover rounded-lg" loading="lazy">
                        </div>
                    `;
                });
            }
        });
    </script>
    
    <style>
        /* CSS STILOVI GALERIJE */
        body { background-color: #111827; }
        .header-bg { background-color: rgba(17, 24, 39, 0.95); }
        .bg-hydro-slate { background-color: #1E293B; }

        .anohubs-logo-img { max-height: 35px; width: auto; color: #22d3ee; display: block; }
        .thumbnail-img {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            border: 2px solid transparent;
            opacity: 0.9;
        }
        .thumbnail-img:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(34, 211, 238, 0.6);
            border-color: #22d3ee;
            opacity: 1;
        }
        
        .lightbox-modal { backdrop-filter: blur(8px); }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }

        /* KRITIČNO: Fiksni prozor za prikaz velike slike */
        #lightbox-window {
            position: relative;
            width: 95vw; 
            height: 90vh; 
            max-width: 1300px; 
            background-color: #111827;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Kontejner za samu sliku (Flex za centriranje) */
        #lightbox-image-wrapper {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        /* Navigacione kontrole - Fiksirane uz rub Modala (CRITICAL FIX) */
        .lightbox-controls-wrapper {
            position: absolute; 
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none; /* Da klik na sliku radi */
        }

        .lightbox-controls-wrapper button {
            pointer-events: auto; /* Vraćamo klik na dugmad */
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            background-color: rgba(0, 0, 0, 0.6); 
            color: white;
            padding: 12px;
            transition: background-color 0.2s, transform 0.2s;
            height: 60px; 
            width: 60px;
        }
        #prev-btn {
            left: 0; 
            border-radius: 0 50% 50% 0;
        }
        #next-btn {
            right: 0;
            border-radius: 50% 0 0 50%;
        }
    </style>
</head>
<body class="text-white bg-hydro-charcoal">

    <header class="header-bg shadow-2xl sticky top-0 z-50 border-b border-hydro-primary/50" role="banner">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 flex justify-between items-center">
            <a href="/index.html#hero" class="focus:outline-none transition" aria-label="Anohubs Logo - Back to top">
                 <img src="/logo.svg" alt="Anohubs Logo" class="anohubs-logo-img">
            </a>
            
            <nav class="flex items-center space-x-4 font-extrabold text-sm" role="navigation">
                <a href="/expert-insights.html" class="text-slate-300 hover:text-cyan-400 transition">Insights</a>
                <a href="/gallery.html" class="text-cyan-400 transition" aria-current="page">Gallery</a>
                <a href="/protocol.html" class="text-slate-300 hover:text-cyan-400 transition">Protocol</a>
                <a href="/index.html#contact" class="bg-hydro-cta hover:bg-yellow-600 text-hydro-charcoal px-4 py-2 rounded-full transition">Request Audit</a>
            </nav>
        </div>
    </header>
    
    <main role="main">
        <section class="py-20 bg-hydro-slate text-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                
                <h1 class="text-5xl md:text-6xl font-extrabold text-hydro-primary mb-4 tracking-tighter fade-in-up">
                    THE HYDRO-VISION GALLERY
                </h1>
                <p class="text-xl md:text-2xl font-light text-cyan-200 mb-12 max-w-4xl mx-auto fade-in-up delay-200">
                    A panoramic view of the global water capital, captured in over ${galleryImages.length} images. This visual manifesto showcases the ecosystems we protect and the environments where the AnoHUB Symbiosis Standard is mandatory.
                </p>

                <div class="mb-12 fade-in-up delay-400">
                    <button onclick="openModal(0); toggleSlideshow(document.getElementById('slideshow-btn'))" 
                            class="bg-hydro-secondary hover:bg-green-500 text-hydro-charcoal px-8 py-3 rounded-full font-bold transition text-lg shadow-xl flex items-center justify-center mx-auto space-x-2">
                        <svg data-lucide="play" class="w-6 h-6"></svg>
                        <span>START FULL SLIDESHOW (${galleryImages.length} IMAGES)</span>
                    </button>
                </div>

                <div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-4 gallery-grid">
                    </div>
                
                <script>
                    if (galleryImages.length === 0) {
                        document.write('<p class="text-xl text-red-400 mt-20">Nema pronađenih slika. Molimo provjerite listu `imageFilenames` u skripti.</p>');
                    }
                </script>

            </div>
        </section>
    </main>
    
    <div id="lightbox-modal" class="lightbox-modal hidden fixed inset-0 z-[100] flex items-center justify-center p-4" onclick="closeModal()">
        
        <div id="lightbox-window" onclick="event.stopPropagation()">
            
            <div id="lightbox-image-wrapper">
                </div>
            
            <div class="p-4 bg-hydro-slate flex justify-between items-center relative">
                
                <div class="text-center">
                    <p id="lightbox-caption" class="text-sm font-semibold text-slate-300"></p>
                    <p id="lightbox-counter" class="text-xs text-slate-500"></p>
                </div>
                
                <div class="flex space-x-3">
                     <button onclick="toggleSlideshow(this)" id="slideshow-btn" class="bg-hydro-secondary hover:bg-green-500 text-hydro-charcoal px-4 py-2 rounded-full font-bold transition text-sm">
                        ▶️ Start Slideshow
                    </button>
                    <button onclick="closeModal()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-full font-bold transition text-sm">
                        Close Gallery
                    </button>
                </div>

            </div>

        </div>

        <div class="lightbox-controls-wrapper">
            <button id="prev-btn" aria-label="Previous image" onclick="navigateGallery(-1)">
                <svg data-lucide="chevron-left" class="w-6 h-6"></svg>
            </button>
            <button id="next-btn" aria-label="Next image" onclick="navigateGallery(1)">
                <svg data-lucide="chevron-right" class="w-6 h-6"></svg>
            </button>
        </div>
        
    </div>
</body>
</html>